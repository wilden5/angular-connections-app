"use strict";(self.webpackChunkconnections_app=self.webpackChunkconnections_app||[]).push([[776],{6776:(J,C,s)=>{s.r(C),s.d(C,{GroupModule:()=>G});var i=s(6814),g=s(6223),p=s(2032),M=s(2296),h=s(5959),O=s(9947),P=s(8180),_=s(9397),m=s(3044),c=s(4221);const f=(0,c.ZF)("dialogList"),x=(0,c.P1)(f,n=>n.dialogList);var u=s(6367),b=s(3258),y=s(7790),v=s(7953),w=s(3159),t=s(5879),A=s(9713),l=s(5683);function I(n,a){if(1&n){const o=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(o);const r=t.oxw(2);return t.KtG(r.onDeleteGroupButtonClick())}),t._uU(1," DELETE CHAT "),t.qZA()}}function D(n,a){if(1&n&&(t.TgZ(0,"div",15)(1,"div",16)(2,"span",17),t._uU(3),t.ALo(4,"async"),t.qZA()(),t.TgZ(5,"span",18),t._uU(6),t.qZA(),t.TgZ(7,"div",19)(8,"span",20),t._uU(9),t.ALo(10,"date"),t.qZA()()()),2&n){const o=a.$implicit,e=t.oxw(2);t.Q6J("ngClass",e.isAuthorMessage(o)),t.xp6(3),t.Oqu(t.lcZ(4,4,e.store.select(e.selectUserById(o.authorID)))),t.xp6(3),t.Oqu(o.message),t.xp6(3),t.Oqu(t.xi3(10,6,o.createdAt,"short"))}}function Z(n,a){1&n&&(t.TgZ(0,"mat-error"),t._uU(1,"Please enter your message"),t.qZA())}function T(n,a){if(1&n){const o=t.EpF();t.ynx(0),t.TgZ(1,"div",2)(2,"button",3),t.NdJ("click",function(){t.CHM(o);const r=t.oxw();return t.KtG(r.onUpdateButtonClick())}),t._uU(3," UPDATE CHAT MESSAGES "),t.qZA(),t.YNc(4,I,2,0,"button",4),t.ALo(5,"async"),t.qZA(),t.TgZ(6,"div",5),t.YNc(7,D,11,9,"div",6),t.qZA(),t.TgZ(8,"div",7)(9,"form",8)(10,"mat-form-field",9)(11,"mat-label"),t._uU(12,"Message"),t.qZA(),t.YNc(13,Z,2,0,"mat-error",1),t._UZ(14,"textarea",10,11),t.qZA()(),t.TgZ(16,"button",12),t.NdJ("click",function(){t.CHM(o);const r=t.MAs(15),d=t.oxw();return t.KtG(d.onSendNewMessageButtonClick(r.value))}),t._uU(17," SEND NEW MESSAGE "),t.qZA()(),t.TgZ(18,"a",13),t._uU(19,"RETURN TO THE MAIN PAGE"),t.qZA(),t.BQk()}if(2&n){const o=a.ngIf,e=t.oxw();t.xp6(4),t.Q6J("ngIf",t.lcZ(5,6,e.store.select(e.selectGroupById(e.groupID,e.authorUid)))),t.xp6(3),t.Q6J("ngForOf",o.messages),t.xp6(2),t.Q6J("formGroup",e.chatForm),t.xp6(4),t.Q6J("ngIf",e.message.invalid),t.xp6(3),t.Q6J("disabled",e.chatForm.invalid),t.xp6(2),t.Q6J("routerLink",e.ProjectPages.Empty)}}let B=(()=>{class n{constructor(o,e,r,d){this.fb=o,this.store=e,this.activatedRoute=r,this.modalService=d,this.selectUserById=u.Ls,this.selectGroupById=b.P9,this.ProjectPages=O.RQ,this.chatForm=this.fb.group({message:["",g.kI.required]}),this.authorUid=JSON.parse(localStorage.getItem("userObject")).uid,this.groupID=this.activatedRoute.snapshot.paramMap.get("id")}ngOnInit(){this.synchronizeGroupMessages(),this.store.select(u.dq).pipe((0,P.q)(1)).subscribe(o=>{0===o.length&&(this.store.dispatch((0,y.I$)()),this.store.dispatch((0,v.PT)()),this.store.dispatch((0,w.op)()))})}synchronizeGroupMessages(){const o=this.store.select((n=>(0,c.P1)(x,a=>a[n.groupID]))({groupID:this.groupID}));o.pipe((0,P.q)(1),(0,_.b)(e=>{this.store.dispatch((0,m.Bd)(e?{groupID:this.groupID,since:e.since}:{groupID:this.groupID,since:0}))})).subscribe(),this.groupResponse$=o}get message(){return this.chatForm.get("message")}isAuthorMessage(o){return this.authorUid===o.authorID?"author-message":""}onUpdateButtonClick(){this.synchronizeGroupMessages()}onSendNewMessageButtonClick(o){this.store.dispatch((0,m.J)({newMessage:{groupID:this.groupID,message:o}})),this.chatForm.reset(),setTimeout(()=>{this.synchronizeGroupMessages()},1500)}onDeleteGroupButtonClick(){this.modalService.openConfirmationDialog(this.groupID,!0)}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(g.qu),t.Y36(c.yh),t.Y36(h.gz),t.Y36(A.Z))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-group"]],decls:3,vars:3,consts:[[1,"main-container"],[4,"ngIf"],[1,"control-buttons"],["mat-raised-button","","color","primary",1,"update-button",3,"click"],["mat-raised-button","","color","warn","class","delete-button",3,"click",4,"ngIf"],[1,"message-container"],["class","wrapper",3,"ngClass",4,"ngFor","ngForOf"],[1,"form-wrapper"],[1,"chat-form",3,"formGroup"],[1,"message-form"],["matInput","","type","text","formControlName","message",1,"message-input"],["textInput",""],["mat-raised-button","","color","primary",1,"send-button",3,"disabled","click"],[1,"main-page-link",3,"routerLink"],["mat-raised-button","","color","warn",1,"delete-button",3,"click"],[1,"wrapper",3,"ngClass"],[1,"author-wrapper"],[1,"author","item"],[1,"message","item"],[1,"created-at-wrapper"],[1,"created-at","item"]],template:function(e,r){1&e&&(t.TgZ(0,"div",0),t.YNc(1,T,20,8,"ng-container",1),t.ALo(2,"async"),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngIf",t.lcZ(2,1,r.groupResponse$)))},dependencies:[i.mk,i.sg,i.O5,h.rH,g._Y,g.Fj,g.JJ,g.JL,g.sg,g.u,p.Nt,l.KE,l.hX,l.TO,M.lW,i.Ov,i.uU],styles:[".light-theme   [_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}.light-theme[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:2rem}.light-theme[_nghost-%COMP%]   .control-buttons[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .control-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;gap:1rem;align-self:center;margin-bottom:2rem}.light-theme[_nghost-%COMP%]   .update-button[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .update-button[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .delete-button[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .delete-button[_ngcontent-%COMP%], .light-theme[_nghost-%COMP%]   .send-button[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .send-button[_ngcontent-%COMP%]{font-family:Agency FB,serif;font-size:2.5rem}.light-theme[_nghost-%COMP%]   .message-container[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90rem;background-color:#faebd7;padding:2rem;overflow:auto;height:50rem}.light-theme[_nghost-%COMP%]   .message-form[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message-form[_ngcontent-%COMP%]{width:100%;align-self:center}.light-theme[_nghost-%COMP%]   .message-input[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message-input[_ngcontent-%COMP%]{resize:none}.light-theme[_nghost-%COMP%]   .item-info[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .item-info[_ngcontent-%COMP%]{display:flex}.light-theme[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:1rem;align-self:flex-start;display:flex;flex-direction:column;align-items:center}.light-theme[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{align-self:flex-end}.light-theme[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{order:1}.light-theme[_nghost-%COMP%]   .author[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .author[_ngcontent-%COMP%]{font-family:Agency FB,serif;margin-right:1rem;font-weight:800;letter-spacing:1px;font-size:1.7rem}.light-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]{display:block;min-width:10rem;max-width:700px;padding:14px 18px;margin:6px 8px;background-color:#6c8ea4;border-radius:0 16px 16px;border:1px solid #54788e;color:#fff;font-size:2rem}.light-theme[_nghost-%COMP%]   .author-message[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]{align-self:flex-end;display:flex;flex-direction:column}.light-theme[_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:2rem;min-width:60px;max-width:700px;padding:14px 18px;margin:6px 8px;background-color:#5b5377;border-radius:16px 16px 0;border:1px solid #443f56}.light-theme[_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{align-self:flex-end}.light-theme[_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{order:0}.light-theme[_nghost-%COMP%]   .main-page-link[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .main-page-link[_ngcontent-%COMP%]{margin-top:5rem;font-size:3rem;font-weight:800;text-decoration:none;color:red;transition:.7s;align-self:center;font-family:Agency FB,serif;margin-bottom:2rem}.light-theme[_nghost-%COMP%]   .main-page-link[_ngcontent-%COMP%]:hover, .light-theme   [_nghost-%COMP%]   .main-page-link[_ngcontent-%COMP%]:hover{color:#000}.light-theme[_nghost-%COMP%]   .chat-form[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .chat-form[_ngcontent-%COMP%]{margin-top:2rem;display:flex}.light-theme[_nghost-%COMP%]   .created-at[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#4f4f4f}.light-theme[_nghost-%COMP%]   .form-wrapper[_ngcontent-%COMP%], .light-theme   [_nghost-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-self:center;width:90%}.dark-theme   [_nghost-%COMP%]{display:flex;flex-direction:column;align-items:center}.dark-theme[_nghost-%COMP%]   .main-container[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-top:2rem}.dark-theme[_nghost-%COMP%]   .control-buttons[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .control-buttons[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90%;gap:1rem;align-self:center;margin-bottom:2rem}.dark-theme[_nghost-%COMP%]   .update-button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .update-button[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .delete-button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .delete-button[_ngcontent-%COMP%], .dark-theme[_nghost-%COMP%]   .send-button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .send-button[_ngcontent-%COMP%]{font-family:Agency FB,serif;font-size:2.5rem}.dark-theme[_nghost-%COMP%]   .update-button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .update-button[_ngcontent-%COMP%]{background-color:#fff!important;color:#000!important}.dark-theme[_nghost-%COMP%]   .send-button[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .send-button[_ngcontent-%COMP%]{background-color:#d3d3d3!important}.dark-theme[_nghost-%COMP%]   .message-container[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:90rem;background-color:#d3d3d3;padding:2rem;overflow:auto;height:50rem}.dark-theme[_nghost-%COMP%]   .message-form[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message-form[_ngcontent-%COMP%]{width:100%;align-self:center}.dark-theme[_nghost-%COMP%]   .message-input[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message-input[_ngcontent-%COMP%]{resize:none}.dark-theme[_nghost-%COMP%]   .item-info[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .item-info[_ngcontent-%COMP%]{display:flex}.dark-theme[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]{padding:1rem;align-self:flex-start;display:flex;flex-direction:column;align-items:center}.dark-theme[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{align-self:flex-end}.dark-theme[_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .wrapper[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{order:1}.dark-theme[_nghost-%COMP%]   .author[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .author[_ngcontent-%COMP%]{font-family:Agency FB,serif;margin-right:1rem;font-weight:800;letter-spacing:1px;font-size:1.7rem}.dark-theme[_nghost-%COMP%]   .message[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .message[_ngcontent-%COMP%]{display:block;min-width:10rem;max-width:700px;padding:14px 18px;margin:6px 8px;background-color:#3592bd;border-radius:0 16px 16px;border:1px solid #3592bd;color:#fff;font-size:2rem}.dark-theme[_nghost-%COMP%]   .author-message[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]{align-self:flex-end;display:flex;flex-direction:column}.dark-theme[_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:2rem;min-width:60px;max-width:700px;padding:14px 18px;margin:6px 8px;background-color:#5234c0;border-radius:16px 16px 0;border:1px solid #5234c0}.dark-theme[_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .item-info[_ngcontent-%COMP%]{align-self:flex-end}.dark-theme[_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .author-message[_ngcontent-%COMP%]   .author[_ngcontent-%COMP%]{order:0}.dark-theme[_nghost-%COMP%]   .main-page-link[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .main-page-link[_ngcontent-%COMP%]{margin-top:5rem;font-size:3rem;font-weight:800;text-decoration:none;color:#fff;transition:.7s;align-self:center;font-family:Agency FB,serif;margin-bottom:2rem}.dark-theme[_nghost-%COMP%]   .main-page-link[_ngcontent-%COMP%]:hover, .dark-theme   [_nghost-%COMP%]   .main-page-link[_ngcontent-%COMP%]:hover{color:#5b5377}.dark-theme[_nghost-%COMP%]   .chat-form[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .chat-form[_ngcontent-%COMP%]{margin-top:2rem;display:flex}.dark-theme[_nghost-%COMP%]   .created-at[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .created-at[_ngcontent-%COMP%]{color:#4f4f4f}.dark-theme[_nghost-%COMP%]   .form-wrapper[_ngcontent-%COMP%], .dark-theme   [_nghost-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-self:center;width:90%}"],changeDetection:0})}return n})();var F=s(6500);const U=[{path:`${O.RQ.GroupId}`,component:B,canActivate:[F.p]}];let z=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[h.Bz.forChild(U),h.Bz]})}return n})(),G=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[i.ez,z,g.UX,p.c,M.ot]})}return n})()}}]);